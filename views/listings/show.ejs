<% layout("/layouts/boilerplate.ejs") %>

    <body>
        <div class="row">
            <div class="col-8 offset-2">
                <h3>
                    <%= listing.title %>:
                </h3>
                <div class="card">
                    <img src="<%=listing.image.url%>" class="card-img-top show-img" alt="Image">
                    <div class="card-body">
                        <h5 class="card-title">
                            <%= listing.title %>
                        </h5>
                        <p class="card-text">
                        <ul>
                            <li>About : <%= listing.description %>
                            </li>
                            <!-- <li> Price : &#8377;<%= listing.price %>
                            </li> -->
                            <li>Country : <%= listing.country %>
                            </li>
                            <li>Location : <%= listing.location %>
                            </li>

                        </ul>
                        </p>
                        <br>
                        <div class="btns">
                            <a href="/listings/<%= listing._id  %>/edit" class="btn btn-primary edit-btn ">Edit</a>

                            <form action="/listings/<%= listing._id  %> ?_method=DELETE" method="post">
                                <button class="btn btn-danger ">Delete</button>
                            </form>
                        </div>

                        <div class="col-8 offset mb-3 mt-3">
                            <hr>
                            <h4>Leave a Review </h4>
                            <form action="/listings/<%= listing._id  %>/reviews" method="post" class="needs-validation">
                                <div class="mb-3 mt-3">
                                    <label for="rating" class="form-label">Rating</label>
                                    <input type="range" min="1" max="5" id="rating" name="review[rating]">
                                </div>
                                <div class="mb-3 mt-3">
                                    <label for="comment" class="form-label">Comments</label>
                                    <textarea name="review[comment]" id="comment" cols="60" rows="5"
                                        class="form-control" required>

                                    </textarea>
                                </div>
                                <button class="btn btn-outline-dark">Submit</button>
                            </form>
                            <hr>
                            <h4>All Reviews </h4>
                            <% for(review of listing.reviews) {%>
                                <ul>
                                    <li>
                                        <%= review.comment %>,
                                            <% for (let i=0; i < review.rating; i++) { %>
                                                <i class="fa-solid fa-star"></i>
                                                <% } %>

                                    </li>
                                </ul>

                                <% } %>
                        </div>

                    </div>



                </div>


            </div>

        </div>

    </body>